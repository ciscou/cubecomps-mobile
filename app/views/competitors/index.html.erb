<% content_for(:back_button) do %>
  <%= link_to "Back", competitions_path, data: { icon: "back" } %>
<% end %>
<% content_for(:title) do %>
  <% cache [@competition, "name"] do %>
    <%= @competition.name %>
  <% end %>
<% end %>

<% content_for(:navbar) do %>
  <ul>
    <li><%= link_to "Categories",  competition_categories_path(@competition), data: { ajax: false } %></li>
    <li><%= link_to "Competitors", competition_competitors_path(@competition), data: { ajax: false }, class: "ui-btn-active" %></li>
  </ul>
<% end %>

<% cache [@competition, "competitors"], expires_in: 5.minutes, race_condition_ttl: 10 do %>
  <% if @competition.competitors.any? %>
    <%= content_tag :ul, data: { role: "listview", filter: true, generated_at: Time.now.to_s(:db) } do %>
      <% @competition.competitors.each do |competitor| %>
        <li><%= link_to competitor.name, competition_competitor_path(@competition, competitor) %></li>
      <% end %>
    <% end %>
  <% else %>
    <p>No available competitors (yet!)</p>
  <% end %>
<% end %>
